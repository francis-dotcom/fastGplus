<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grand Plus College â€“ Hetzner Architecture</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Syne:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #090c12;
    --surface: #0f1520;
    --surface2: #141c2e;
    --border: #1e2d4a;
    --border2: #243452;
    --accent: #3b82f6;
    --accent2: #60a5fa;
    --green: #22c55e;
    --yellow: #f59e0b;
    --purple: #a78bfa;
    --red: #f87171;
    --teal: #2dd4bf;
    --text: #e2e8f0;
    --muted: #64748b;
    --dim: #94a3b8;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    min-height: 100vh;
    padding: 2rem;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: 
      radial-gradient(ellipse 80% 50% at 20% 20%, rgba(59,130,246,0.06) 0%, transparent 60%),
      radial-gradient(ellipse 60% 40% at 80% 80%, rgba(167,139,250,0.05) 0%, transparent 60%);
    pointer-events: none;
    z-index: 0;
  }

  .page { position: relative; z-index: 1; max-width: 1400px; margin: 0 auto; }

  header {
    text-align: center;
    margin-bottom: 3rem;
    animation: fadeDown 0.6s ease both;
  }

  header h1 {
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: clamp(1.6rem, 4vw, 2.4rem);
    letter-spacing: -0.02em;
    background: linear-gradient(135deg, #60a5fa, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  header p {
    margin-top: 0.5rem;
    color: var(--muted);
    font-size: 0.8rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  /* â”€â”€ MAIN GRID â”€â”€ */
  .arch-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
  }

  /* â”€â”€ CARD â”€â”€ */
  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.25rem;
    animation: fadeUp 0.5s ease both;
    position: relative;
    overflow: hidden;
  }

  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    border-radius: 12px 12px 0 0;
  }
  .card.blue::before { background: linear-gradient(90deg, var(--accent), transparent); }
  .card.green::before { background: linear-gradient(90deg, var(--green), transparent); }
  .card.purple::before { background: linear-gradient(90deg, var(--purple), transparent); }
  .card.yellow::before { background: linear-gradient(90deg, var(--yellow), transparent); }
  .card.teal::before { background: linear-gradient(90deg, var(--teal), transparent); }

  .card:nth-child(1) { animation-delay: 0.1s; }
  .card:nth-child(2) { animation-delay: 0.2s; }
  .card:nth-child(3) { animation-delay: 0.3s; }
  .card:nth-child(4) { animation-delay: 0.4s; }
  .card:nth-child(5) { animation-delay: 0.5s; grid-column: 1 / -1; }

  .card-title {
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 0.85rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    padding: 0.15rem 0.5rem;
    border-radius: 4px;
    font-size: 0.65rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }
  .badge-blue { background: rgba(59,130,246,0.15); color: var(--accent2); border: 1px solid rgba(59,130,246,0.3); }
  .badge-green { background: rgba(34,197,94,0.12); color: var(--green); border: 1px solid rgba(34,197,94,0.25); }
  .badge-purple { background: rgba(167,139,250,0.12); color: var(--purple); border: 1px solid rgba(167,139,250,0.25); }
  .badge-yellow { background: rgba(245,158,11,0.12); color: var(--yellow); border: 1px solid rgba(245,158,11,0.25); }
  .badge-teal { background: rgba(45,212,191,0.12); color: var(--teal); border: 1px solid rgba(45,212,191,0.25); }
  .badge-red { background: rgba(248,113,113,0.12); color: var(--red); border: 1px solid rgba(248,113,113,0.25); }

  /* â”€â”€ TREE NODES â”€â”€ */
  .tree { display: flex; flex-direction: column; gap: 0.35rem; }

  .node {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    padding: 0.4rem 0.6rem;
    border-radius: 6px;
    background: var(--surface2);
    border: 1px solid var(--border);
    font-size: 0.75rem;
    transition: border-color 0.2s, background 0.2s;
    cursor: default;
  }
  .node:hover { border-color: var(--border2); background: rgba(255,255,255,0.03); }

  .node-icon { font-size: 0.9rem; flex-shrink: 0; line-height: 1.3; }
  .node-content { display: flex; flex-direction: column; gap: 0.1rem; }
  .node-label { color: var(--text); font-weight: 600; }
  .node-sub { color: var(--muted); font-size: 0.68rem; }

  .indent { padding-left: 1.25rem; display: flex; flex-direction: column; gap: 0.3rem; margin-top: 0.3rem; }

  /* â”€â”€ NGINX ROUTES TABLE â”€â”€ */
  .routes {
    display: grid;
    grid-template-columns: auto auto auto 1fr;
    gap: 0 0;
    font-size: 0.72rem;
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid var(--border);
  }

  .rt-head {
    background: rgba(59,130,246,0.1);
    color: var(--accent2);
    padding: 0.4rem 0.6rem;
    font-weight: 700;
    font-size: 0.65rem;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    border-bottom: 1px solid var(--border);
  }

  .rt-cell {
    padding: 0.4rem 0.6rem;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }
  .rt-cell:last-child, .rt-cell:nth-last-child(-n+4):nth-child(4n+1) ~ .rt-cell { }

  .rt-row:last-child .rt-cell { border-bottom: none; }
  .rt-route { color: var(--green); font-weight: 600; }
  .rt-page { color: var(--yellow); }
  .rt-method { color: var(--purple); }
  .rt-target { color: var(--dim); }

  /* row style */
  .rt-body { display: contents; }
  .routes > .rt-cell:nth-child(8n+5),
  .routes > .rt-cell:nth-child(8n+6),
  .routes > .rt-cell:nth-child(8n+7),
  .routes > .rt-cell:nth-child(8n+8) {
    background: rgba(255,255,255,0.015);
  }

  /* â”€â”€ DOCKER STACK â”€â”€ */
  .docker-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.6rem;
  }

  .svc {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 0.65rem;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    transition: border-color 0.2s;
  }
  .svc:hover { border-color: var(--border2); }

  .svc-name {
    font-size: 0.72rem;
    font-weight: 700;
    color: var(--text);
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }
  .svc-dot {
    width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0;
    animation: pulse 2s infinite;
  }
  .dot-green { background: var(--green); box-shadow: 0 0 6px var(--green); }
  .dot-blue { background: var(--accent); box-shadow: 0 0 6px var(--accent); }
  .dot-yellow { background: var(--yellow); box-shadow: 0 0 6px var(--yellow); }
  .dot-purple { background: var(--purple); box-shadow: 0 0 6px var(--purple); }
  .dot-teal { background: var(--teal); box-shadow: 0 0 6px var(--teal); }
  .dot-gray { background: var(--muted); }

  .svc-port { font-size: 0.65rem; color: var(--muted); }

  /* â”€â”€ FLOW DIAGRAM â”€â”€ */
  .flows { display: flex; flex-direction: column; gap: 1rem; }

  .flow {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 0.75rem 1rem;
  }

  .flow-title {
    font-size: 0.7rem;
    font-weight: 700;
    color: var(--dim);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 0.6rem;
  }

  .flow-path {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 0;
  }

  .flow-step {
    display: flex;
    align-items: center;
    gap: 0;
  }

  .fnode {
    padding: 0.3rem 0.6rem;
    border-radius: 5px;
    font-size: 0.7rem;
    font-weight: 600;
    white-space: nowrap;
    border: 1px solid transparent;
  }

  .fnode-browser { background: rgba(245,158,11,0.12); color: var(--yellow); border-color: rgba(245,158,11,0.25); }
  .fnode-cf { background: rgba(248,113,113,0.1); color: #fb923c; border-color: rgba(251,146,60,0.25); }
  .fnode-nginx { background: rgba(34,197,94,0.1); color: var(--green); border-color: rgba(34,197,94,0.2); }
  .fnode-static { background: rgba(100,116,139,0.15); color: var(--dim); border-color: rgba(100,116,139,0.2); }
  .fnode-api { background: rgba(59,130,246,0.12); color: var(--accent2); border-color: rgba(59,130,246,0.25); }
  .fnode-db { background: rgba(167,139,250,0.12); color: var(--purple); border-color: rgba(167,139,250,0.25); }
  .fnode-ext { background: rgba(45,212,191,0.1); color: var(--teal); border-color: rgba(45,212,191,0.2); }

  .arrow {
    color: var(--muted);
    font-size: 0.75rem;
    padding: 0 0.3rem;
    flex-shrink: 0;
  }

  .flow-note {
    margin-top: 0.4rem;
    font-size: 0.63rem;
    color: var(--muted);
  }
  .flow-note code {
    background: rgba(255,255,255,0.05);
    padding: 0.1rem 0.3rem;
    border-radius: 3px;
    color: var(--green);
  }

  /* â”€â”€ ANIMATIONS â”€â”€ */
  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-16px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }

  /* â”€â”€ LEGEND â”€â”€ */
  .legend {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    margin-top: 2rem;
    justify-content: center;
    animation: fadeUp 0.5s 0.6s ease both;
    opacity: 0;
  }
  .legend-item {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    font-size: 0.65rem;
    color: var(--muted);
  }
  .legend-dot { width: 8px; height: 8px; border-radius: 50%; }

  @media (max-width: 900px) {
    .arch-grid { grid-template-columns: 1fr; }
    .card:nth-child(5) { grid-column: 1; }
    .docker-grid { grid-template-columns: repeat(2, 1fr); }
    .routes { grid-template-columns: 1fr 1fr; }
    .rt-head:nth-child(3), .rt-head:nth-child(4) { display: none; }
  }
</style>
</head>
<body>
<div class="page">

  <header>
    <h1>Grand Plus College â€” Hetzner Architecture</h1>
    <p>Infrastructure Â· Routing Â· Docker Stack Â· Request Flows</p>
  </header>

  <div class="arch-grid">

    <!-- CARD 1: HOST OS -->
    <div class="card blue">
      <div class="card-title">
        ğŸ–¥ï¸ Hetzner VPS â€” Ubuntu Host
        <span class="badge badge-blue">PROD</span>
      </div>
      <div class="tree">
        <div class="node">
          <span class="node-icon">ğŸ§</span>
          <div class="node-content">
            <span class="node-label">Ubuntu Host OS</span>
            <span class="node-sub">Bare-metal runtime environment</span>
          </div>
        </div>
        <div class="indent">
          <div class="node">
            <span class="node-icon">ğŸŒ</span>
            <div class="node-content">
              <span class="node-label">Nginx</span>
              <span class="node-sub">Reverse proxy + static file server</span>
            </div>
          </div>
          <div class="node">
            <span class="node-icon">ğŸ³</span>
            <div class="node-content">
              <span class="node-label">Docker Engine</span>
              <span class="node-sub">Hosts SelfDB stack + optional Postgres</span>
            </div>
          </div>
          <div class="node">
            <span class="node-icon">ğŸ“</span>
            <div class="node-content">
              <span class="node-label">Static Site</span>
              <span class="node-sub">/var/www/html/grandpluscollege</span>
            </div>
          </div>
          <div class="node">
            <span class="node-icon">ğŸ—„ï¸</span>
            <div class="node-content">
              <span class="node-label">Optional Postgres</span>
              <span class="node-sub">127.0.0.1:5433 Â· not public</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- CARD 2: NGINX ROUTING -->
    <div class="card green">
      <div class="card-title">
        ğŸŒ Nginx â€” Routing & SSL
        <span class="badge badge-green">HTTPS :443</span>
      </div>
      <div class="routes">
        <div class="rt-head">Route</div>
        <div class="rt-head">Page</div>
        <div class="rt-head">Method</div>
        <div class="rt-head">Target / Action</div>

        <div class="rt-cell rt-route">/</div>
        <div class="rt-cell rt-page">index.html</div>
        <div class="rt-cell"><span class="badge badge-green">STATIC</span></div>
        <div class="rt-cell rt-target">â†’ /var/www/html/grandpluscollege</div>

        <div class="rt-cell rt-route">/support</div>
        <div class="rt-cell rt-page">support.html</div>
        <div class="rt-cell"><span class="badge badge-green">STATIC</span></div>
        <div class="rt-cell rt-target">form â†’ SelfDB API</div>

        <div class="rt-cell rt-route">/apply</div>
        <div class="rt-cell rt-page">apply.html</div>
        <div class="rt-cell"><span class="badge badge-green">STATIC</span></div>
        <div class="rt-cell rt-target">form â†’ SelfDB API</div>

        <div class="rt-cell rt-route">/fees</div>
        <div class="rt-cell rt-page">fees.html</div>
        <div class="rt-cell"><span class="badge badge-teal">EXT</span></div>
        <div class="rt-cell rt-target">loads from Supabase cloud</div>

        <div class="rt-cell rt-route">/api/*</div>
        <div class="rt-cell rt-page">â€”</div>
        <div class="rt-cell"><span class="badge badge-blue">PROXY</span></div>
        <div class="rt-cell rt-target">â†’ 127.0.0.1:8000 (FastAPI)</div>

        <div class="rt-cell rt-route">SSL</div>
        <div class="rt-cell rt-page">â€”</div>
        <div class="rt-cell"><span class="badge badge-yellow">TLS</span></div>
        <div class="rt-cell rt-target">Cloudflare + Let's Encrypt</div>
      </div>
    </div>

    <!-- CARD 3: DOCKER STACK -->
    <div class="card purple">
      <div class="card-title">
        ğŸ³ Docker â€” SelfDB Stack
        <span class="badge badge-purple">INTERNAL</span>
      </div>
      <div class="docker-grid">
        <div class="svc">
          <div class="svc-name"><span class="svc-dot dot-purple"></span>Postgres DB</div>
          <div class="svc-port">:5432 Â· internal only</div>
        </div>
        <div class="svc">
          <div class="svc-name"><span class="svc-dot dot-blue"></span>PgBouncer</div>
          <div class="svc-port">Connection pooler Â· internal</div>
        </div>
        <div class="svc">
          <div class="svc-name"><span class="svc-dot dot-green"></span>FastAPI Backend</div>
          <div class="svc-port">127.0.0.1:8000 â† Nginx</div>
        </div>
        <div class="svc">
          <div class="svc-name"><span class="svc-dot dot-yellow"></span>Admin UI</div>
          <div class="svc-port">:3000</div>
        </div>
        <div class="svc">
          <div class="svc-name"><span class="svc-dot dot-teal"></span>Realtime</div>
          <div class="svc-port">WebSocket events</div>
        </div>
        <div class="svc">
          <div class="svc-name"><span class="svc-dot dot-blue"></span>Storage</div>
          <div class="svc-port">File / object store</div>
        </div>
        <div class="svc" style="grid-column: span 3;">
          <div class="svc-name"><span class="svc-dot dot-gray"></span>Functions (Edge)</div>
          <div class="svc-port">Serverless function runner</div>
        </div>
      </div>
    </div>

    <!-- CARD 4: EXTERNAL & STATIC -->
    <div class="card yellow">
      <div class="card-title">
        ğŸŒ Static Files & External Services
      </div>
      <div class="tree">
        <div class="node">
          <span class="node-icon">ğŸ“„</span>
          <div class="node-content">
            <span class="node-label">Static Pages</span>
          </div>
        </div>
        <div class="indent">
          <div class="node"><span class="node-icon">ğŸ </span><div class="node-content"><span class="node-label">index.html</span></div></div>
          <div class="node"><span class="node-icon">ğŸ†˜</span><div class="node-content"><span class="node-label">support.html</span></div></div>
          <div class="node"><span class="node-icon">ğŸ“</span><div class="node-content"><span class="node-label">apply.html</span></div></div>
          <div class="node"><span class="node-icon">ğŸ’°</span><div class="node-content"><span class="node-label">fees.html</span></div></div>
          <div class="node"><span class="node-icon">ğŸ“Š</span><div class="node-content"><span class="node-label">status.html</span></div></div>
        </div>
        <div class="node" style="margin-top:0.4rem">
          <span class="node-icon">â˜ï¸</span>
          <div class="node-content">
            <span class="node-label">Supabase Cloud</span>
            <span class="node-sub">fees.html loads data directly</span>
          </div>
        </div>
        <div class="node">
          <span class="node-icon">ğŸ’³</span>
          <div class="node-content">
            <span class="node-label">PayGate</span>
            <span class="node-sub">Payment processing integration</span>
          </div>
        </div>
      </div>
    </div>

    <!-- CARD 5: REQUEST FLOWS (full width) -->
    <div class="card teal">
      <div class="card-title">
        ğŸ”€ Request Flows
        <span class="badge badge-teal">END-TO-END</span>
      </div>
      <div class="flows">

        <div class="flow">
          <div class="flow-title">ğŸŒ Static Page Load</div>
          <div class="flow-path">
            <div class="flow-step"><span class="fnode fnode-browser">Browser</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-cf">Cloudflare</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-nginx">Nginx :443</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-static">Static Files</span></div>
          </div>
          <div class="flow-note">Served directly from <code>/var/www/html/grandpluscollege</code> with CDN edge caching via Cloudflare</div>
        </div>

        <div class="flow">
          <div class="flow-title">ğŸ†˜ Support Form Submission</div>
          <div class="flow-path">
            <div class="flow-step"><span class="fnode fnode-browser">Browser</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-nginx">POST /api/</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-api">FastAPI :8000</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-db">Postgres</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-static">JSON Response</span></div>
          </div>
          <div class="flow-note">Inserts into <code>contact_submissions</code> table Â· Nginx proxies <code>/api/*</code> â†’ <code>127.0.0.1:8000</code></div>
        </div>

        <div class="flow">
          <div class="flow-title">ğŸ“ Application Form Submission</div>
          <div class="flow-path">
            <div class="flow-step"><span class="fnode fnode-browser">Browser</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-nginx">POST /api/</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-api">FastAPI :8000</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-db">Postgres</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-static">JSON Response</span></div>
          </div>
          <div class="flow-note">Inserts into <code>applications</code> table Â· same proxy path as support</div>
        </div>

        <div class="flow">
          <div class="flow-title">ğŸ’° Fees Page Data Load</div>
          <div class="flow-path">
            <div class="flow-step"><span class="fnode fnode-browser">Browser</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-ext">Supabase Cloud</span><span class="arrow">â†’</span></div>
            <div class="flow-step"><span class="fnode fnode-static">Data returned</span></div>
          </div>
          <div class="flow-note">Browser calls Supabase directly Â· bypasses Hetzner/Nginx entirely Â· data served from cloud DB</div>
        </div>

      </div>
    </div>

  </div><!-- /arch-grid -->

  <div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:var(--green)"></div>Internal Service</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--accent)"></div>Proxy / API</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--purple)"></div>Database</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--yellow)"></div>Static / File</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--teal)"></div>External Cloud</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--red)"></div>CDN / TLS</div>
  </div>

</div>
</body>
</html>