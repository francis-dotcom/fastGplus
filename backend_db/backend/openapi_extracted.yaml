openapi: 3.1.0
info:
  title: SelfDB
  description: Full Self-Hosted BaaS Built for AI Agents.
  version: 0.0.5
paths:
  /users/token:
    post:
      tags:
      - users
      summary: Login
      operationId: login_for_access_token_users_token_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenPair'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      parameters:
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
  /users/token/refresh:
    post:
      tags:
      - users
      summary: Refresh Token
      description: 'Exchange a refresh token for a new access + refresh token pair.

        The old refresh token is invalidated (one-time use).'
      operationId: refresh_access_token_users_token_refresh_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenPair'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      parameters:
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
  /users/logout:
    post:
      tags:
      - users
      summary: Logout
      description: 'Logout the current user. If refresh_token is provided, revokes
        only that token.

        Otherwise, revokes all refresh tokens for the user (logout from all devices).'
      operationId: logout_users_logout_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LogoutRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LogoutResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
  /users/logout/all:
    post:
      tags:
      - users
      summary: Logout All Devices
      description: Revoke all refresh tokens for the current user (logout from all
        devices).
      operationId: logout_all_devices_users_logout_all_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LogoutResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
  /users/me:
    get:
      tags:
      - users
      summary: Get Current User
      operationId: read_users_me_users_me_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRead'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
  /users/count:
    get:
      tags:
      - users
      summary: Get User Count
      description: Get total number of users, optionally filtered by search term.
        Requires authentication.
      operationId: get_user_count_users_count_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: search
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
            pattern: ^[\x20-\x7E]*$
          - type: 'null'
          description: Search term for filtering by email, first name, or last name
          title: Search
        description: Search term for filtering by email, first name, or last name
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: integer
                title: Response Get User Count Users Count Get
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /users/:
    post:
      tags:
      - users
      summary: Create User
      operationId: create_user_users__post
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCreate'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRead'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      parameters:
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
    get:
      tags:
      - users
      summary: List Users
      description: 'List users with optional search and sorting. Requires authentication.


        - **search**: Filter by email, first name, or last name (case-insensitive,
        printable ASCII only)

        - **sort_by**: Field to sort by (created_at, email, first_name, last_name)

        - **sort_order**: Sort direction (asc or desc, default: desc)'
      operationId: read_users_users__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          maximum: 2147483647
          minimum: 0
          default: 0
          title: Skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          default: 100
          title: Limit
      - name: search
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
            pattern: ^[\x20-\x7E]*$
          - type: 'null'
          description: Search term for filtering by email, first name, or last name
          title: Search
        description: Search term for filtering by email, first name, or last name
      - name: sort_by
        in: query
        required: false
        schema:
          enum:
          - created_at
          - email
          - first_name
          - last_name
          type: string
          description: Field to sort by
          default: created_at
          title: Sort By
        description: Field to sort by
      - name: sort_order
        in: query
        required: false
        schema:
          enum:
          - asc
          - desc
          type: string
          description: Sort order (ascending or descending)
          default: desc
          title: Sort Order
        description: Sort order (ascending or descending)
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserRead'
                title: Response Read Users Users  Get
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /users/{user_id}:
    get:
      tags:
      - users
      summary: Read User
      operationId: read_user_users__user_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: User Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRead'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    patch:
      tags:
      - users
      summary: Update User
      operationId: update_user_users__user_id__patch
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: User Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRead'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - users
      summary: Delete User
      operationId: delete_user_users__user_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: User Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDeleteResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /tables/count:
    get:
      tags:
      - tables
      summary: Get Table Count
      description: Get total number of tables accessible to the user, optionally filtered
        by search term.
      operationId: get_table_count_tables_count_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: search
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
            pattern: ^[\x20-\x7E]*$
          - type: 'null'
          description: Search term for filtering by name or description
          title: Search
        description: Search term for filtering by name or description
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: integer
                title: Response Get Table Count Tables Count Get
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /tables/:
    post:
      tags:
      - tables
      summary: Create Table
      description: Create a new table. Requires authentication.
      operationId: create_table_tables__post
      security:
      - OAuth2PasswordBearer: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TableCreate'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TableRead'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      parameters:
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
    get:
      tags:
      - tables
      summary: List Tables
      description: 'List tables with optional search and sorting.


        - **search**: Filter by name or description (case-insensitive, printable ASCII
        only)

        - **sort_by**: Field to sort by (created_at, updated_at, name)

        - **sort_order**: Sort direction (asc or desc, default: desc)


        Returns:

        - For unauthenticated users: Only public tables

        - For authenticated users: Public tables + tables owned by the user'
      operationId: read_tables_tables__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          maximum: 2147483647
          minimum: 0
          default: 0
          title: Skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          default: 100
          title: Limit
      - name: search
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
            pattern: ^[\x20-\x7E]*$
          - type: 'null'
          description: Search term for filtering by name or description
          title: Search
        description: Search term for filtering by name or description
      - name: sort_by
        in: query
        required: false
        schema:
          enum:
          - created_at
          - updated_at
          - name
          type: string
          description: Field to sort by
          default: created_at
          title: Sort By
        description: Field to sort by
      - name: sort_order
        in: query
        required: false
        schema:
          enum:
          - asc
          - desc
          type: string
          description: Sort order (ascending or descending)
          default: desc
          title: Sort Order
        description: Sort order (ascending or descending)
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TableRead'
                title: Response Read Tables Tables  Get
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /tables/{table_id}:
    get:
      tags:
      - tables
      summary: Get Table
      description: 'Get a specific table by ID.

        - Public tables: Accessible to anyone (with or without authentication)

        - Private tables: Must be authenticated and be the owner'
      operationId: read_table_tables__table_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: table_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Table Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TableRead'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    patch:
      tags:
      - tables
      summary: Update Table
      description: 'Update a table. Only the owner or admin can update.


        When realtime_enabled is toggled:

        - True: Creates a trigger that broadcasts changes via pg_notify to ''table:<name>''

        - False: Removes the realtime trigger'
      operationId: update_table_tables__table_id__patch
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: table_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Table Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TableUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TableRead'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - tables
      summary: Delete Table
      description: Delete a table. Only the owner or admin can delete.
      operationId: delete_table_tables__table_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: table_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Table Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TableDeleteResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /tables/{table_id}/columns:
    post:
      tags:
      - tables
      summary: Add Column to Table
      description: Add a new column to an existing table. Only owner or admin can
        add columns.
      operationId: add_column_tables__table_id__columns_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: table_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Table Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ColumnDefinition'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /tables/{table_id}/columns/{column_name}:
    patch:
      tags:
      - tables
      summary: Update Column
      description: Update column properties. Only owner or admin can update columns.
      operationId: update_column_tables__table_id__columns__column_name__patch
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: table_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Table Id
      - name: column_name
        in: path
        required: true
        schema:
          type: string
          title: Column Name
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ColumnUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - tables
      summary: Delete Column
      description: Delete a column from a table. Only owner or admin can delete columns.
      operationId: delete_column_tables__table_id__columns__column_name__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: table_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Table Id
      - name: column_name
        in: path
        required: true
        schema:
          type: string
          title: Column Name
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /tables/{table_id}/data:
    get:
      tags:
      - tables
      summary: Get Table Data
      description: 'Get paginated data from a table with optional search and sorting.


        - **search**: Filter rows by searching across all text/varchar columns (case-insensitive)

        - **sort_by**: Column name to sort by (must be a valid column in the table)

        - **sort_order**: Sort direction (asc or desc, default: desc)


        Access:

        - Public tables: Accessible to anyone

        - Private tables: Owner only'
      operationId: get_table_data_tables__table_id__data_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: table_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Table Id
      - name: page
        in: query
        required: false
        schema:
          type: integer
          minimum: 1
          default: 1
          title: Page
      - name: page_size
        in: query
        required: false
        schema:
          type: integer
          maximum: 1000
          minimum: 1
          default: 100
          title: Page Size
      - name: search
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
            pattern: ^[\x20-\x7E]*$
          - type: 'null'
          description: Search term for filtering across all text columns
          title: Search
        description: Search term for filtering across all text columns
      - name: sort_by
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
          - type: 'null'
          description: Column name to sort by
          title: Sort By
        description: Column name to sort by
      - name: sort_order
        in: query
        required: false
        schema:
          enum:
          - asc
          - desc
          type: string
          description: Sort order (ascending or descending)
          default: desc
          title: Sort Order
        description: Sort order (ascending or descending)
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TableDataResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    post:
      tags:
      - tables
      summary: Insert Row
      description: 'Insert a new row into the table.

        - Public tables: Anyone can insert (with or without authentication) - useful
        for blog comments, likes, feedback

        - Private tables: Only owner or admin can insert'
      operationId: insert_row_tables__table_id__data_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: table_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Table Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Row Data
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /tables/{table_id}/data/{row_id}:
    patch:
      tags:
      - tables
      summary: Update Row
      description: Update a row in the table. Only owner or admin can update.
      operationId: update_row_tables__table_id__data__row_id__patch
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: table_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Table Id
      - name: row_id
        in: path
        required: true
        schema:
          type: string
          title: Row Id
      - name: id_column
        in: query
        required: false
        schema:
          type: string
          default: id
          title: Id Column
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Updates
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - tables
      summary: Delete Row
      description: Delete a row from the table. Only owner or admin can delete.
      operationId: delete_row_tables__table_id__data__row_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: table_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Table Id
      - name: row_id
        in: path
        required: true
        schema:
          type: string
          title: Row Id
      - name: id_column
        in: query
        required: false
        schema:
          type: string
          default: id
          title: Id Column
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RowDeleteResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /storage/buckets/count:
    get:
      tags:
      - storage-buckets
      summary: Get Bucket Count
      description: Get total number of buckets accessible to the user.
      operationId: get_bucket_count_storage_buckets_count_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: search
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
            pattern: ^[\x20-\x7E]*$
          - type: 'null'
          title: Search
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: integer
                title: Response Get Bucket Count Storage Buckets Count Get
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /storage/buckets/:
    post:
      tags:
      - storage-buckets
      summary: Create Bucket
      description: Create a new storage bucket. Requires authentication.
      operationId: create_bucket_storage_buckets__post
      security:
      - OAuth2PasswordBearer: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BucketCreate'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BucketResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      parameters:
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
    get:
      tags:
      - storage-buckets
      summary: List Buckets
      description: 'List buckets with optional search and sorting.


        - For unauthenticated users: Only public buckets

        - For authenticated users: Public buckets + buckets owned by the user'
      operationId: list_buckets_storage_buckets__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: skip
        in: query
        required: false
        schema:
          type: integer
          maximum: 2147483647
          minimum: 0
          default: 0
          title: Skip
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          default: 100
          title: Limit
      - name: search
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
            pattern: ^[\x20-\x7E]*$
          - type: 'null'
          title: Search
      - name: sort_by
        in: query
        required: false
        schema:
          enum:
          - created_at
          - updated_at
          - name
          type: string
          default: created_at
          title: Sort By
      - name: sort_order
        in: query
        required: false
        schema:
          enum:
          - asc
          - desc
          type: string
          default: desc
          title: Sort Order
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BucketResponse'
                title: Response List Buckets Storage Buckets  Get
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /storage/buckets/{bucket_id}:
    get:
      tags:
      - storage-buckets
      summary: Get Bucket
      description: 'Get a specific bucket by ID.

        - Public buckets: Accessible to anyone

        - Private buckets: Must be authenticated and be the owner'
      operationId: get_bucket_storage_buckets__bucket_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: bucket_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Bucket Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BucketResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    patch:
      tags:
      - storage-buckets
      summary: Update Bucket
      description: Update a bucket. Only the owner or admin can update.
      operationId: update_bucket_storage_buckets__bucket_id__patch
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: bucket_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Bucket Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BucketUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BucketResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - storage-buckets
      summary: Delete Bucket
      description: Delete a bucket and all files inside it. Only the owner or admin
        can delete.
      operationId: delete_bucket_storage_buckets__bucket_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: bucket_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: Bucket Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '204':
          description: Successful Response
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /storage/files/stats:
    get:
      tags:
      - storage-files
      summary: Get Storage Stats
      description: 'Get total storage statistics across all accessible buckets.


        Returns:

        - total_files: Total number of files across all accessible buckets

        - total_size: Total storage size in bytes

        - bucket_count: Number of accessible buckets'
      operationId: get_storage_stats_storage_files_stats_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: search
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
            pattern: ^[\x20-\x7E]*$
          - type: 'null'
          description: Search term for filtering
          title: Search
        description: Search term for filtering
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StorageStatsResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '413':
          description: File Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /storage/files/total-count:
    get:
      tags:
      - storage-files
      summary: Get Total File Count
      description: 'Get total number of files across all accessible buckets.


        - For unauthenticated users: Files in public buckets only

        - For authenticated users: Files in public buckets + owned buckets'
      operationId: get_total_file_count_storage_files_total_count_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: search
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
            pattern: ^[\x20-\x7E]*$
          - type: 'null'
          description: Search term for filtering by name or path
          title: Search
        description: Search term for filtering by name or path
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: integer
                title: Response Get Total File Count Storage Files Total Count Get
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '413':
          description: File Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /storage/files/count:
    get:
      tags:
      - storage-files
      summary: Get File Count
      description: Get total number of files in a bucket accessible to the user.
      operationId: get_file_count_storage_files_count_get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: bucket_id
        in: query
        required: true
        schema:
          type: string
          format: uuid
          description: Bucket ID to count files in
          title: Bucket Id
        description: Bucket ID to count files in
      - name: search
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
            pattern: ^[\x20-\x7E]*$
          - type: 'null'
          title: Search
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: integer
                title: Response Get File Count Storage Files Count Get
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '413':
          description: File Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /storage/files/upload:
    post:
      tags:
      - storage-files
      summary: Upload File (Streaming)
      description: 'Upload a file to a bucket using true streaming (no memory buffering).


        The file content is streamed directly from the client to the storage service

        without being fully buffered in memory on the backend. This enables efficient

        handling of both small and large files.


        - Public buckets: Anyone can upload

        - Private buckets: Only owner or admin can upload


        Automatically renames duplicates using macOS-style increment (e.g., ''file
        (1).pdf'').


        Request body should contain the raw file bytes (not multipart form data).

        Use Content-Length header for file size validation.'
      operationId: upload_file_storage_files_upload_post
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: bucket_id
        in: query
        required: true
        schema:
          type: string
          format: uuid
          description: Target bucket ID
          title: Bucket Id
        description: Target bucket ID
      - name: filename
        in: query
        required: true
        schema:
          type: string
          description: Original filename
          title: Filename
        description: Original filename
      - name: path
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Target path within bucket
          title: Path
        description: Target path within bucket
      - name: content_type
        in: query
        required: false
        schema:
          type: string
          description: MIME type of the file
          default: application/octet-stream
          title: Content Type
        description: MIME type of the file
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileUploadResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '413':
          description: File Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /storage/files/:
    get:
      tags:
      - storage-files
      summary: List Files
      description: 'List files in a bucket with pagination, search, and sorting.


        - Public buckets: Accessible to anyone

        - Private buckets: Owner or admin only'
      operationId: list_files_storage_files__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: bucket_id
        in: query
        required: true
        schema:
          type: string
          format: uuid
          description: Bucket ID to list files from
          title: Bucket Id
        description: Bucket ID to list files from
      - name: page
        in: query
        required: false
        schema:
          type: integer
          minimum: 1
          default: 1
          title: Page
      - name: page_size
        in: query
        required: false
        schema:
          type: integer
          maximum: 1000
          minimum: 1
          default: 100
          title: Page Size
      - name: search
        in: query
        required: false
        schema:
          anyOf:
          - type: string
            maxLength: 100
            pattern: ^[\x20-\x7E]*$
          - type: 'null'
          title: Search
      - name: sort_by
        in: query
        required: false
        schema:
          enum:
          - created_at
          - updated_at
          - name
          - size
          type: string
          default: created_at
          title: Sort By
      - name: sort_order
        in: query
        required: false
        schema:
          enum:
          - asc
          - desc
          type: string
          default: desc
          title: Sort Order
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileDataResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '413':
          description: File Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /storage/files/{file_id}:
    get:
      tags:
      - storage-files
      summary: Get File Metadata
      description: Get file metadata by ID.
      operationId: get_file_metadata_storage_files__file_id__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: file_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: File Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '413':
          description: File Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - storage-files
      summary: Delete File
      description: Delete a file. Only owner or admin can delete.
      operationId: delete_file_storage_files__file_id__delete
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: file_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: File Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '204':
          description: Successful Response
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '413':
          description: File Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    patch:
      tags:
      - storage-files
      summary: Update File Metadata
      description: Update file metadata. Only owner or admin can update.
      operationId: update_file_metadata_storage_files__file_id__patch
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: file_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          title: File Id
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Metadata
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '413':
          description: File Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /storage/files/download/{bucket_name}/{path}:
    get:
      tags:
      - storage-files
      summary: Download File
      description: 'Download a file from storage.


        - Public buckets: Accessible to anyone

        - Private buckets: Owner or admin only'
      operationId: download_file_storage_files_download__bucket_name___path__get
      security:
      - OAuth2PasswordBearer: []
      parameters:
      - name: bucket_name
        in: path
        required: true
        schema:
          type: string
          minLength: 3
          maxLength: 63
          pattern: ^[a-z0-9][a-z0-9\-]{1,61}[a-z0-9]$
          title: Bucket Name
      - name: path
        in: path
        required: true
        schema:
          type: string
          title: Path
      - name: X-API-Key
        in: header
        required: true
        schema:
          type: string
        description: API key required for all endpoints (validated by middleware)
      responses:
        '200':
          description: File content
          content:
            application/json:
              schema: {}
            '*/*':
              schema:
                type: string
                format: binary
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '406':
          description: Not Acceptable (Missing API Key)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '413':
          description: File Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/endpoints__schema__ErrorResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /realtime/socket:
    get:
      tags:
      - realtime
      summary: WebSocket Proxy for Realtime
      description: 'WebSocket endpoint that proxies connections to the internal Phoenix
        realtime service.


        **Protocol:** WebSocket (not HTTP)


        **Authentication:**

        - API Key: Pass `X-API-Key` as query parameter (required)

        - JWT Token: Pass `token` as query parameter for user context (optional)


        **Connection URL:**

        ```

        ws://localhost:8000/realtime/socket?X-API-Key=<api_key>&token=<jwt_token>

        ```


        **Phoenix Channel Protocol:**

        - Join: `{"topic": "table:users", "event": "phx_join", "payload": {}, "ref":
        "1"}`

        - Events: `insert`, `update`, `delete`

        - Payload: `{"event": "INSERT", "table": "users", "new": {...}, "old": null}`

        '
      operationId: websocket_realtime_socket
      parameters:
      - name: X-API-Key
        in: query
        required: true
        schema:
          type: string
        description: API key required for WebSocket connections (passed as query param
          since WebSocket can't use headers)
      - name: token
        in: query
        required: false
        schema:
          type: string
        description: JWT access token for user authentication (optional, for user-specific
          subscriptions)
      responses:
        '101':
          description: Switching Protocols - WebSocket connection established
        '404':
          description: Not Found - This endpoint only accepts WebSocket connections,
            not HTTP requests
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
        '406':
          description: Missing required X-API-Key parameter
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
        '401':
          description: Invalid API key
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
components:
  schemas:
    UserUpdate:
      properties:
        email:
          anyOf:
          - type: string
            format: email
          - type: 'null'
          title: Email
        password:
          anyOf:
          - type: string
            maxLength: 72
            minLength: 8
            format: password
            writeOnly: true
          - type: 'null'
          pattern: ^[A-Za-z0-9@$!%*?&]{8,72}$
          title: Password
        role:
          anyOf:
          - $ref: '#/components/schemas/UserRole'
          - type: 'null'
        isActive:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Isactive
        firstName:
          anyOf:
          - type: string
            maxLength: 100
            minLength: 1
            pattern: ^[^\x00]+$
          - type: 'null'
          title: Firstname
          description: First name (no NUL bytes allowed)
        lastName:
          anyOf:
          - type: string
            maxLength: 100
            minLength: 1
            pattern: ^[^\x00]+$
          - type: 'null'
          title: Lastname
          description: Last name (no NUL bytes allowed)
      additionalProperties: false
      type: object
      title: UserUpdate
      examples:
      - email: updated@example.com
        is_active: false
        password: NewPass123!
    UserCreate:
      properties:
        email:
          type: string
          format: email
          title: Email
        firstName:
          type: string
          maxLength: 100
          minLength: 1
          pattern: ^[^\x00]+$
          title: Firstname
          description: First name (no NUL bytes allowed)
        lastName:
          type: string
          maxLength: 100
          minLength: 1
          pattern: ^[^\x00]+$
          title: Lastname
          description: Last name (no NUL bytes allowed)
        password:
          type: string
          maxLength: 72
          minLength: 8
          pattern: ^[A-Za-z0-9@$!%*?&]{8,72}$
          title: Password
          writeOnly: true
      additionalProperties: false
      type: object
      required:
      - email
      - firstName
      - lastName
      - password
      title: UserCreate
    LogoutResponse:
      properties:
        status:
          type: string
          title: Status
          default: logged_out
      type: object
      title: LogoutResponse
      description: Response from logout.
    TokenPair:
      properties:
        access_token:
          type: string
          title: Access Token
        refresh_token:
          type: string
          title: Refresh Token
        token_type:
          type: string
          title: Token Type
          default: bearer
        expires_in:
          type: integer
          title: Expires In
          description: Access token expiry in seconds
      type: object
      required:
      - access_token
      - refresh_token
      - expires_in
      title: TokenPair
      description: Response containing both access and refresh tokens.
    ColumnUpdate:
      properties:
        new_name:
          anyOf:
          - type: string
          - type: 'null'
          title: New Name
        type:
          anyOf:
          - type: string
          - type: 'null'
          title: Type
        nullable:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Nullable
        default:
          anyOf:
          - type: string
          - type: 'null'
          title: Default
      type: object
      title: ColumnUpdate
      description: Model for updating column properties.
    UserRead:
      properties:
        email:
          type: string
          format: email
          title: Email
        firstName:
          type: string
          maxLength: 100
          minLength: 1
          pattern: ^[^\x00]+$
          title: Firstname
          description: First name (no NUL bytes allowed)
        lastName:
          type: string
          maxLength: 100
          minLength: 1
          pattern: ^[^\x00]+$
          title: Lastname
          description: Last name (no NUL bytes allowed)
        role:
          $ref: '#/components/schemas/UserRole'
          default: USER
        isActive:
          type: boolean
          title: Isactive
          default: true
        id:
          type: string
          format: uuid
          title: Id
        created_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Created At
      type: object
      required:
      - email
      - firstName
      - lastName
      - id
      title: UserRead
    TableCreate:
      properties:
        name:
          type: string
          maxLength: 63
          minLength: 1
          pattern: ^[a-z][a-z0-9_]*$
          title: Name
          description: Table name (lowercase letters, numbers, underscores, must start
            with letter)
        table_schema:
          additionalProperties: true
          type: object
          title: Table Schema
          description: JSON schema definition for table structure
        public:
          type: boolean
          title: Public
          default: false
        description:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Description
        metadata:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Metadata
      additionalProperties: false
      type: object
      required:
      - name
      - table_schema
      title: TableCreate
      examples:
      - description: Product catalog table
        metadata:
          version: '1.0'
        name: products
        public: true
        table_schema:
          properties:
            name:
              type: string
            price:
              type: number
          type: object
    FileUploadResponse:
      properties:
        success:
          type: boolean
          title: Success
          default: true
        bucket:
          type: string
          title: Bucket
        path:
          type: string
          title: Path
        size:
          type: integer
          title: Size
        file_id:
          anyOf:
          - type: string
            format: uuid
          - type: 'null'
          title: File Id
        upload_time:
          anyOf:
          - type: number
          - type: 'null'
          title: Upload Time
        url:
          anyOf:
          - type: string
          - type: 'null'
          title: Url
        original_path:
          anyOf:
          - type: string
          - type: 'null'
          title: Original Path
        message:
          anyOf:
          - type: string
          - type: 'null'
          title: Message
      type: object
      required:
      - bucket
      - path
      - size
      title: FileUploadResponse
      description: Response model for file upload (matches frontend UploadResponse).
    BucketUpdate:
      properties:
        public:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Public
        description:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Description
        metadata:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Metadata
      additionalProperties: false
      type: object
      title: BucketUpdate
      description: Request model for updating a bucket.
    RefreshRequest:
      properties:
        refresh_token:
          type: string
          maxLength: 512
          minLength: 1
          title: Refresh Token
      type: object
      required:
      - refresh_token
      title: RefreshRequest
      description: Request to refresh tokens.
    endpoints__schema__ErrorResponse:
      properties:
        detail:
          type: string
          title: Detail
      type: object
      required:
      - detail
      title: ErrorResponse
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    StorageStatsResponse:
      properties:
        total_files:
          type: integer
          title: Total Files
        total_size:
          type: integer
          title: Total Size
        bucket_count:
          type: integer
          title: Bucket Count
      type: object
      required:
      - total_files
      - total_size
      - bucket_count
      title: StorageStatsResponse
      description: Response model for storage statistics.
    UserDeleteResponse:
      properties:
        status:
          type: string
          title: Status
          default: user_deleted
        id:
          type: string
          format: uuid
          title: Id
      type: object
      required:
      - id
      title: UserDeleteResponse
    TableDataResponse:
      properties:
        data:
          items:
            additionalProperties: true
            type: object
          type: array
          title: Data
        total:
          type: integer
          title: Total
        page:
          type: integer
          title: Page
        page_size:
          type: integer
          title: Page Size
      type: object
      required:
      - data
      - total
      - page
      - page_size
      title: TableDataResponse
      description: Response model for table data with metadata.
    TableUpdate:
      properties:
        name:
          anyOf:
          - type: string
            maxLength: 63
            minLength: 1
            pattern: ^[a-z][a-z0-9_]*$
          - type: 'null'
          title: Name
        table_schema:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Table Schema
        public:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Public
        description:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Description
        metadata:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Metadata
        realtime_enabled:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Realtime Enabled
      additionalProperties: false
      type: object
      title: TableUpdate
      examples:
      - description: Updated product table
        public: false
    BucketCreate:
      properties:
        name:
          type: string
          maxLength: 63
          minLength: 3
          pattern: ^[a-z0-9][a-z0-9\-]{1,61}[a-z0-9]$
          title: Name
          examples:
          - my-bucket
          - user-uploads
        public:
          type: boolean
          title: Public
          default: false
        description:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Description
        metadata:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Metadata
      additionalProperties: false
      type: object
      required:
      - name
      title: BucketCreate
      description: Request model for creating a bucket.
    ColumnDefinition:
      properties:
        name:
          type: string
          title: Name
        type:
          type: string
          title: Type
        nullable:
          type: boolean
          title: Nullable
          default: true
        default:
          anyOf:
          - type: string
          - type: 'null'
          title: Default
      type: object
      required:
      - name
      - type
      title: ColumnDefinition
      description: Model for adding a new column to a table.
    FileResponse:
      properties:
        id:
          type: string
          format: uuid
          title: Id
        bucket_id:
          type: string
          format: uuid
          title: Bucket Id
        name:
          type: string
          title: Name
          examples:
          - document.pdf
          - photo.png
        path:
          type: string
          title: Path
          examples:
          - uploads/document.pdf
          - images/photo.png
        size:
          type: integer
          title: Size
          examples:
          - 1024
          - 2048576
        mime_type:
          type: string
          title: Mime Type
          examples:
          - application/pdf
          - image/png
        owner_id:
          anyOf:
          - type: string
            format: uuid
          - type: 'null'
          title: Owner Id
        metadata:
          additionalProperties: true
          type: object
          title: Metadata
        checksum_sha256:
          anyOf:
          - type: string
          - type: 'null'
          title: Checksum Sha256
        version:
          type: integer
          title: Version
          default: 1
        is_latest:
          type: boolean
          title: Is Latest
          default: true
        deleted_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Deleted At
        created_at:
          type: string
          format: date-time
          title: Created At
        updated_at:
          type: string
          format: date-time
          title: Updated At
      type: object
      required:
      - id
      - bucket_id
      - name
      - path
      - size
      - mime_type
      - created_at
      - updated_at
      title: FileResponse
      description: Response model for file (matches frontend FileItem interface).
    TableRead:
      properties:
        name:
          type: string
          maxLength: 63
          minLength: 1
          pattern: ^[a-z][a-z0-9_]*$
          title: Name
        table_schema:
          additionalProperties: true
          type: object
          title: Table Schema
          description: JSON schema definition for table structure
        public:
          type: boolean
          title: Public
          default: false
        description:
          anyOf:
          - type: string
            maxLength: 500
          - type: 'null'
          title: Description
        metadata:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Metadata
        id:
          type: string
          format: uuid
          title: Id
        owner_id:
          type: string
          format: uuid
          title: Owner Id
        row_count:
          type: integer
          title: Row Count
          default: 0
        realtime_enabled:
          type: boolean
          title: Realtime Enabled
          default: false
        created_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Created At
        updated_at:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Updated At
      type: object
      required:
      - name
      - table_schema
      - id
      - owner_id
      title: TableRead
      examples:
      - description: Product catalog table
        name: products
        public: true
        table_schema:
          properties:
            name:
              type: string
          type: object
    LoginRequest:
      properties:
        email:
          type: string
          format: email
          title: Email
        password:
          type: string
          maxLength: 72
          minLength: 1
          pattern: ^[\x20-\x7E]+$
          title: Password
      additionalProperties: false
      type: object
      required:
      - email
      - password
      title: LoginRequest
    RowDeleteResponse:
      properties:
        status:
          type: string
          title: Status
          default: row_deleted
        table_id:
          type: string
          format: uuid
          title: Table Id
        row_id:
          type: string
          title: Row Id
      type: object
      required:
      - table_id
      - row_id
      title: RowDeleteResponse
    FileDataResponse:
      properties:
        files:
          items:
            $ref: '#/components/schemas/FileResponse'
          type: array
          title: Files
        total:
          type: integer
          title: Total
        page:
          type: integer
          title: Page
        page_size:
          type: integer
          title: Page Size
      type: object
      required:
      - files
      - total
      - page
      - page_size
      title: FileDataResponse
      description: Response model for file listing with metadata.
    TableDeleteResponse:
      properties:
        status:
          type: string
          title: Status
          default: table_deleted
        id:
          type: string
          format: uuid
          title: Id
        name:
          type: string
          title: Name
      type: object
      required:
      - id
      - name
      title: TableDeleteResponse
    LogoutRequest:
      properties:
        refresh_token:
          anyOf:
          - type: string
            maxLength: 512
            minLength: 1
          - type: 'null'
          title: Refresh Token
      type: object
      title: LogoutRequest
      description: Request to logout (revoke refresh token).
    BucketResponse:
      properties:
        id:
          type: string
          format: uuid
          title: Id
        name:
          type: string
          title: Name
        public:
          type: boolean
          title: Public
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        file_count:
          type: integer
          title: File Count
          default: 0
        total_size:
          type: integer
          title: Total Size
          default: 0
        owner_id:
          anyOf:
          - type: string
            format: uuid
          - type: 'null'
          title: Owner Id
        metadata:
          additionalProperties: true
          type: object
          title: Metadata
        created_at:
          type: string
          format: date-time
          title: Created At
        updated_at:
          type: string
          format: date-time
          title: Updated At
      type: object
      required:
      - id
      - name
      - public
      - created_at
      - updated_at
      title: BucketResponse
      description: Response model for bucket (matches frontend Bucket interface).
    UserRole:
      type: string
      enum:
      - USER
      - ADMIN
      title: UserRole
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
  securitySchemes:
    OAuth2PasswordBearer:
      type: oauth2
      flows:
        password:
          scopes: {}
          tokenUrl: /users/token
