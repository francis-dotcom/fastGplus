# ═══════════════════════════════════════════════════════════════════════════════
# SelfDB Environment Configuration
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# App Metadata
# ─────────────────────────────────────────────────────────────────────────────
APP_NAME=SelfDB
APP_DESCRIPTION=Full Self-Hosted BaaS Built for AI Agents. 
APP_VERSION=0.0.5.4
# ─────────────────────────────────────────────────────────────────────────────
# Port Configuration
# ─────────────────────────────────────────────────────────────────────────────
# EXTERNAL PORTS - Only these are exposed to the host machine
BACKEND_PORT=8001
BACKEND_WORKERS=1
FRONTEND_PORT=3001

# ─────────────────────────────────────────────────────────────────────────────
# Public Domains (Caddy Auto HTTPS) for Production Deployment ⚠️
# ─────────────────────────────────────────────────────────────────────────────
# Set these to real DNS hostnames that point to this server. ⚠️
# Caddy uses them to automatically provision/renew TLS certs (Let's Encrypt).
CADDY_EMAIL=email@your-domain.com
FRONTEND_DOMAIN=admin.your-domain.com
BACKEND_DOMAIN=api.your-domain.com
# Publicly accessible base URL for webhooks (used by frontend to show callback URL). CHANGE THIS TO YOUR PRODUCTION.⚠️
PUBLIC_WEBHOOK_BASE_URL=http://localhost:8000
# CORS allowed origins (comma-separated list). ADD YOUR PRODUCTION FRONTEND AND BACKEND DOMAINS HERE AS WELL. ⚠️
CORS_ORIGINS=http://localhost:8000,http://localhost:3000,http://localhost:5173


# ─────────────────────────────────────────────────────────────────────────────
# Service Port Configuration
# ─────────────────────────────────────────────────────────────────────────────
# INTERNAL PORTS - Only accessible within Docker network (selfdb-network)
# PostgreSQL database - internal only, accessed by pgbouncer
DB_PORT=5432
# PgBouncer connection pooler - internal only, accessed by backend
PGBOUNCER_PORT=6433
# Realtime service - WebSocket connections go through backend at /realtime/socket
REALTIME_INTERNAL_PORT=4000
# Storage service - Blob storage, accessed via backend proxy
STORAGE_HOST=storage
STORAGE_INTERNAL_PORT=9000
STORAGE_WORKERS=1

# Functions service - Serverless function runtime
FUNCTIONS_INTERNAL_PORT=8090
EXECUTION_TIMEOUT_MS=30000
MAX_CONCURRENT_EXECUTIONS=10

# ─────────────────────────────────────────────────────────────────────────────
# Database Configuration
# ─────────────────────────────────────────────────────────────────────────────
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=gpc_selfdb

# ─────────────────────────────────────────────────────────────────────────────
# PgBouncer Configuration
# ─────────────────────────────────────────────────────────────────────────────
POOL_MODE=transaction
MAX_CLIENT_CONN=5000
DEFAULT_POOL_SIZE=100
RESERVE_POOL_SIZE=20
SERVER_LIFETIME=3600
SERVER_IDLE_TIMEOUT=60
QUERY_WAIT_TIMEOUT=30
CLIENT_IDLE_TIMEOUT=0

# ─────────────────────────────────────────────────────────────────────────────
# Security Configuration
# ─────────────────────────────────────────────────────────────────────────────
SECRET_KEY=4689187d21dddf45f912575e733b68bd6e72e83f30c4ed3844711dcc8eb84309
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=30
API_KEY=selfdb-bd66637d-60dc-cf8a-a1aa-037f1b37d7b9

# ─────────────────────────────────────────────────────────────────────────────
# Admin User Configuration (for initial seeding)
# ─────────────────────────────────────────────────────────────────────────────
ADMIN_EMAIL=femioginos@gmail.com
ADMIN_PASSWORD=4211
ADMIN_FIRST_NAME=femi
ADMIN_LAST_NAME=ogini

# ─────────────────────────────────────────────────────────────────────────────
# Backup Configuration
# ─────────────────────────────────────────────────────────────────────────────
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE_CRON=0 2 * * *
